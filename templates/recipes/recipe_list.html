{% extends 'base.html' %}

{% block title %}Список рецептов{% endblock %}

{% block content %}
<div class="row mb-4">
    <div class="col-md-8">
        <h1>Рецепты</h1>
    </div>
    <div class="col-md-4 text-end">
        <a href="{% url 'recipe_create' %}" class="btn btn-primary">Добавить рецепт</a>
    </div>
</div>

<div class="row mb-4">
    <div class="col">
        <form  action="{% url 'search_recipe' %}" method="GET" class="d-flex" role="search">
            <input class="form-control me-2"type="text" name="q" type="search" placeholder="Поиск рецептов..." aria-label="Поиск">
            <button type="submit" class="btn btn-outline-primary">Поиск</button>
        </form>
    </div>
</div>

<div class="row">
    {% for recipe in recipes %}
    <div class="col-md-6 mb-4">
        <div class="recipe-card">
            <h2 class="h4">{{ recipe.title }}</h2>
            <p class="text-muted">{{ recipe.description|truncatewords:30 }}</p>
            <div class="d-flex justify-content-between align-items-center">
                <a href="{% url 'recipe_detail' recipe.id %}" class="btn btn-info">Просмотреть</a>
                <form method="post" action="{% url 'recipe_delete' recipe.pk %}"
                      onsubmit="return confirm('Вы уверены, что хотите удалить этот рецепт?');">
                    {% csrf_token %}
                    <button type="submit" class="btn btn-danger">Удалить</button>
                </form>
            </div>
        </div>
    </div>
    {% empty %}
    <div class="col-12">
        <div class="alert alert-info">
            Рецептов пока нет. <a href="{% url 'recipe_create' %}">Создайте первый рецепт</a>.
        </div>
    </div>
    {% endfor %}
</div>
{% endblock %}

